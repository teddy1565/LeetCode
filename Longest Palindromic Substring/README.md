# Lognest Palindromic Substring

## Intro

找出最長子字串

## 心得

大致有了解題架構

## 算法

### 暴力破解

在了解Manacher演算法之前，我們先了解一下「笨」辦法，也就是暴力迴圈，或者說死算。

注意到每個回文字串都是以一個對稱點為中心左右對稱的，所以暴力運算的方式是我們迴圈每個字母作對稱點，然後在每個對稱點檢視所能找到的最大回文字串的長度，最終得到結果。

需要注意到的一點，就是如果單純的把每個字元當作對稱點的話，只能得到奇數長度的回文字串符。

而回文字串可能是偶數長度的，比如「cbaabd」中的「baab」，此時對稱點是介於兩個字元「a」中間的。

這樣的話，如果直接處理起來，可能會比較麻煩，比如需要額外定義如何表示字元中間的位置。

這裡有一種巧妙的辦法，就是在字串中插入一些定位符，比如「$」，比如字串「cbaabd」就會變「$c$b$a$a$b$d$」。

此時我們只需要按照奇長度字串的處理方式去處理這個字串（即每次選取對稱點只需依次選取字元），最後得到的回文字串「$b$a$a$b$」中，再把定位符「$」去掉，我們就可以得到原始的偶長度字串「baab」了。

#### 時間複雜度

因為我們巢狀迴圈2次，外迴圈是n次，內迴圈平均下來是n/2次，所以時間複雜度是O(n^2)

### Manacher演算法

要線上性時間內找出字串的最長回文子串，這個演算法必須利用回文字串和子回文字串中觀察到的一些特點。

首先我們觀察一下回文字串可知，回文字串都是對稱的。

而且如果一個長回文字串的對稱點左面包含一個小的回文字串，那麼對稱過去到右面也必然會包含一個小的回文字串，比如「dacabacad」這個字串中，對稱點b左面有一個回文字串「aca」，右面也會對稱出一個回文字串「aca」。

#### 情況1

如果左側小回文字串的左邊界在大回文字串的左邊界之內，那麼右面對稱出的小回文字串也不會觸碰到大回文字串的右邊界。

比如「dacaxacad」這個字串，左側的「aca」沒有超過這個大回文字串的左邊界，那麼右面對稱出的「aca」也不會超過右邊界。

也就是說，在這種情況下，右面這個小回文字串的長度與對稱的小回文字串的長度相等，絕對不會超過這個大回文字串。

#### 情況2

如果左側小回文字串的左邊界超過了大回文字串的左邊界，那這個右面對稱出的小回文字串會正好觸碰到大回文字串的右邊界，但是不會超出。

比如觀察這個字串「dcbabcdxdcbabce」。左側的小回文字串的邊界超出了用底線標出的大回文字串的左邊界。對稱過來的右側的小回文字串的邊界會剛好卡在大回文字串的右邊界。這是由於大回文字串右邊界之外的下一個字母（此處是「e」）絕對不是左邊界的那個字母「d」的對稱，所以右邊的小回文字串延申到邊界之後也無法繼續延申下去了。

也就是說，在這種情況下，右面這個小回文字串的右邊界與大回文字串的右邊界相同，那麼這個小回文字串的長度也絕對不會超過這個大回文字串。

#### 情況3

如果左側小回文字串的左邊界正好卡在大回文字串的左邊界上，那麼右面對稱出的小回文字串有可能會繼續延伸下去，超過大回文字串的右邊界。

比如觀察這個字串「abcdcbabcdxdcbabcdxdcb"，左邊的小回文字串的左邊界正好卡在大回文字串的左邊界上，那麼對稱過來的大回文字串是有可能繼續延申下去的。比如在這個例子中，右面以「a」為對稱點的小回文字串一直能向右延申到整個字串的結尾。

也就是說，在這種情況下，右面這個小回文字串的右邊界至少與大回文字串的右邊界相同，並且有可能會延申。也就是說這個小回文字串的長度可能會超過這個大回文字串。

#### 總結

我們考慮了左邊的小回文字串的邊界與大回文字串邊界的三種情況，只有情況3，也就是正好邊界在同一位置的時候，右側的小回文字串的長度才有可能會超過大回文字串，而其他兩種情況的話，我們可以跳過不去計算。

所以Manacher演算法在先找到一個長回文字串之後，可以選擇性的跳過很多字母，無需一一計算，與暴力迴圈相比極大了提升了演算法的效率。
