<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>DP Ë≤∑Ë≥£ËÇ°Á•®ÂãïÁï´ÊºîÁ§∫</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .container { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); width: 800px; }
        h1 { text-align: center; color: #333; }
        
        .chart-area { display: flex; justify-content: space-around; margin-top: 30px; align-items: flex-end; height: 200px; border-bottom: 2px solid #ddd; padding-bottom: 10px; }
        .bar-group { display: flex; flex-direction: column; align-items: center; width: 60px; transition: all 0.5s; opacity: 0.3; }
        .bar-group.active { opacity: 1; transform: scale(1.1); }
        .bar { width: 40px; background: #3498db; border-radius: 5px 5px 0 0; display: flex; align-items: flex-end; justify-content: center; color: white; font-weight: bold; transition: height 0.5s; }
        .price-label { margin-top: 10px; font-weight: bold; }

        .dashboard { display: flex; justify-content: space-between; margin-top: 40px; gap: 20px; }
        .card { flex: 1; padding: 20px; border-radius: 10px; color: white; position: relative; overflow: hidden; }
        .card h3 { margin: 0 0 10px 0; font-size: 1.2rem; }
        .card .value { font-size: 2.5rem; font-weight: bold; }
        .card .calc { font-size: 0.9rem; margin-top: 10px; opacity: 0.9; min-height: 40px; }
        
        .cash-card { background: linear-gradient(135deg, #2ecc71, #27ae60); }
        .hold-card { background: linear-gradient(135deg, #e74c3c, #c0392b); }
        
        .controls { margin-top: 30px; text-align: center; }
        button { padding: 10px 25px; font-size: 1.2rem; cursor: pointer; background: #333; color: white; border: none; border-radius: 50px; }
        button:hover { background: #555; }
        button:disabled { background: #ccc; cursor: not-allowed; }

        .arrow-up { color: #2ecc71; }
        .arrow-down { color: #e74c3c; }
    </style>
</head>
<body>

<div class="container">
    <h1>ËÇ°Á•® DP ÈÇèËºØË¶ñË¶∫Âåñ</h1>
    <div style="text-align: center; margin-bottom: 20px;">ËÇ°ÂÉπËµ∞Âã¢: [7, 1, 5, 3, 6, 4]</div>

    <div class="chart-area" id="chart">
        </div>

    <div class="dashboard">
        <div class="card cash-card">
            <h3>üòé Á©∫ÊâãÊ¥æ (dp[0])</h3>
            <div class="value" id="dp0-val">0</div>
            <div class="calc" id="dp0-calc">Ëµ∑ÂßãË≥áÈáë</div>
        </div>
        <div class="card hold-card">
            <h3>ü§† ÊåÅËÇ°Ê¥æ (dp[1])</h3>
            <div class="value" id="dp1-val">-999</div>
            <div class="calc" id="dp1-calc">Â∞öÊú™ÈñãÂßã</div>
        </div>
    </div>

    <div class="controls">
        <button onclick="nextStep()" id="btn-next">ÈñãÂßã‰∏ã‰∏ÄÊ≠• ‚ñ∂</button>
        <button onclick="reset()" style="background: #999; margin-left: 10px;">ÈáçÁΩÆ</button>
    </div>
</div>

<script>
    const prices = [7, 1, 5, 3, 6, 4];
    let step = -1;
    let dp0 = 0;
    let dp1 = -Infinity; // ÂàùÂßãË®≠ÁÇ∫ÁÑ°ÈôêÂ∞è

    function initChart() {
        const chart = document.getElementById('chart');
        chart.innerHTML = '';
        prices.forEach((p, i) => {
            const group = document.createElement('div');
            group.className = 'bar-group';
            group.id = `day-${i}`;
            group.innerHTML = `
                <div class="bar" style="height: ${p * 20}px;">${p}</div>
                <div class="price-label">Day ${i}</div>
            `;
            chart.appendChild(group);
        });
    }

    function updateUI(idx) {
        document.querySelectorAll('.bar-group').forEach(el => el.classList.remove('active'));
        if(idx >= 0 && idx < prices.length) {
            document.getElementById(`day-${idx}`).classList.add('active');
        }
    }

    function nextStep() {
        step++;
        const btn = document.getElementById('btn-next');
        
        if (step >= prices.length) {
            btn.innerText = "ÁµêÊùü";
            btn.disabled = true;
            return;
        }

        const p = prices[step];
        updateUI(step);

        // Logic Calculation
        let prevDp0 = dp0;
        let prevDp1 = dp1;

        // Day 0 initialization logic for display
        if (step === 0) {
            dp1 = -p;
            document.getElementById('dp0-val').innerText = 0;
            document.getElementById('dp0-calc').innerText = "Á∂≠ÊåÅ 0";
            
            document.getElementById('dp1-val').innerText = dp1;
            document.getElementById('dp1-calc').innerText = `Ë≤∑ÂÖ•ÊàêÊú¨: -${p}`;
        } else {
            // DP Ê†∏ÂøÉÈÇèËºØ
            let sellProfit = prevDp1 + p;
            let buyCost = prevDp0 - p;

            // Update DP0 (Á©∫ÊâãÊ¥æ)
            let newDp0 = Math.max(prevDp0, sellProfit);
            let dp0Msg = "";
            if (sellProfit > prevDp0) {
                dp0Msg = `üí∞ Ë≥£Âá∫! (${prevDp1} + ${p} = ${sellProfit})`;
            } else {
                dp0Msg = `üí§ ‰ºëÊÅØ (‰øùÊåÅ ${prevDp0})`;
            }

            // Update DP1 (ÊåÅËÇ°Ê¥æ)
            let newDp1 = Math.max(prevDp1, buyCost);
            let dp1Msg = "";
            if (buyCost > prevDp1) {
                dp1Msg = `üõí Ë≤∑ÂÖ•! (${prevDp0} - ${p} = ${buyCost})`;
            } else {
                dp1Msg = `‚úä Á∫åÊä± (‰øùÊåÅ ${prevDp1})`;
            }

            dp0 = newDp0;
            dp1 = newDp1;

            // Update DOM
            document.getElementById('dp0-val').innerText = dp0;
            document.getElementById('dp0-calc').innerText = dp0Msg;
            
            document.getElementById('dp1-val').innerText = dp1;
            document.getElementById('dp1-calc').innerText = dp1Msg;
        }
    }

    function reset() {
        step = -1;
        dp0 = 0;
        dp1 = -Infinity;
        document.getElementById('btn-next').disabled = false;
        document.getElementById('btn-next').innerText = "ÈñãÂßã‰∏ã‰∏ÄÊ≠• ‚ñ∂";
        document.getElementById('dp0-val').innerText = 0;
        document.getElementById('dp1-val').innerText = "-";
        document.getElementById('dp0-calc').innerText = "Ëµ∑Âßã";
        document.getElementById('dp1-calc').innerText = "Ëµ∑Âßã";
        updateUI(-1);
    }

    initChart();
</script>

</body>
</html>